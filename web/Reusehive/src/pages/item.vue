<template>
  <div class="item-detail-container">
    <div class="navbar">
      <t-navbar :fixed="false" left-arrow @left-click="goBack"/>
    </div>
    <div class="user-info">
      <div class="avatar-container" @click="">
        <t-avatar class="avatar" v-bind:image="user.avatar_img"></t-avatar>
      </div>
      <div class="info-container">
        <span class="username">{{ user.name }}</span>
        <span class="academy">{{ user.academy }}</span>
      </div>
    </div>
    <div class="item-title">
      <p>{{ item.item.name }}</p>
    </div>
    <div class="item-images">
      <t-swiper :autoplay="true" :navigation="{ type: 'dots' }" @change="" @click="">
        <t-swiper-item v-for="(url, index) in item.images" :key="index" style="height: 192px">
          <img :src="url.toString()" class="img"/>
        </t-swiper-item>
      </t-swiper>
    </div>
    <div class="item-info">
      <div class="price">
        <span class="symbol">¥</span>
        <span class="data">
                    {{ item.item.prices }}
                </span>
      </div>
      <div class="desc">
        <p>{{ item.item.description }}</p>
      </div>
      <div class="botbar">
        <t-button :icon="chatIcon" class="chat-icon" theme="primary" @click="gochat">
          聊一聊
        </t-button>
        <t-button v-if="!collected" class="star-icon" theme="primary" @click="UseColletion()">
          <svg class="icon" height="48" p-id="11485" style="margin-top: 7px" t="1713617642967"
               version="1.1" viewBox="0 0 1024 1024" width="48" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M692.1 269.2c-15.1 0-27.3-12.3-27.3-27.3 0-15.1 12.3-27.3 27.3-27.3 15.1 0 27.3 12.3 27.3 27.3s-12.2 27.3-27.3 27.3z m0-41.3c-7.7 0-13.9 6.2-13.9 13.9s6.2 13.9 13.9 13.9 13.9-6.2 13.9-13.9c0-7.6-6.2-13.9-13.9-13.9z"
                fill="#47B7F8" p-id="11486"></path>
            <path
                d="M249 312.7h-12v-12c0-3.2-2.6-5.8-5.8-5.8-3.2 0-5.8 2.6-5.8 5.8v12h-12c-3.2 0-5.8 2.6-5.8 5.8s2.6 5.8 5.8 5.8h12v12c0 3.2 2.6 5.8 5.8 5.8 3.2 0 5.8-2.6 5.8-5.8v-12h12c3.2 0 5.8-2.6 5.8-5.8s-2.6-5.8-5.8-5.8zM853.2 429h-12v-12c0-3.2-2.6-5.8-5.8-5.8-3.2 0-5.8 2.6-5.8 5.8v12h-12c-3.2 0-5.8 2.6-5.8 5.8s2.6 5.8 5.8 5.8h12v12c0 3.2 2.6 5.8 5.8 5.8 3.2 0 5.8-2.6 5.8-5.8v-12h12c3.2 0 5.8-2.6 5.8-5.8s-2.6-5.8-5.8-5.8z"
                fill="#F7E42F" p-id="11487"></path>
            <path
                d="M112.5 586.5H98.6v-13.9a6.7 6.7 0 0 0-13.4 0v13.9h-14a6.7 6.7 0 0 0 0 13.4h13.9v13.9a6.7 6.7 0 0 0 13.4 0v-13.9h13.9c3.7 0 6.7-3 6.7-6.7 0.1-3.7-2.9-6.7-6.6-6.7z"
                fill="#F8B62D" p-id="11488"></path>
            <path d="M340.1 251.9m-10.1 0a10.1 10.1 0 1 0 20.2 0 10.1 10.1 0 1 0-20.2 0Z" fill="#F8B62D"
                  p-id="11489"></path>
            <path d="M790.8 305.1m-13.4 0a13.4 13.4 0 1 0 26.8 0 13.4 13.4 0 1 0-26.8 0Z" fill="#F8B62D"
                  p-id="11490"></path>
            <path d="M112.5 251.9m-13.4 0a13.4 13.4 0 1 0 26.8 0 13.4 13.4 0 1 0-26.8 0Z" fill="#F7E42F"
                  p-id="11491"></path>
            <path
                d="M125.5 434.8c-15.1 0-27.3-12.3-27.3-27.3 0-15.1 12.3-27.3 27.3-27.3s27.3 12.3 27.3 27.3-12.3 27.3-27.3 27.3z m0-41.3c-7.7 0-13.9 6.2-13.9 13.9s6.2 13.9 13.9 13.9 13.9-6.2 13.9-13.9c0-7.6-6.3-13.9-13.9-13.9z"
                fill="#F8B62D" p-id="11492"></path>
            <path
                d="M454.5 141.2c-1.5-1.4-3.8-1.4-5.3 0-0.7 0.7-1.1 1.6-1.1 2.6s0.4 1.9 1.1 2.6l11.9 11.9c0.7 0.7 1.6 1.1 2.6 1.1s1.9-0.4 2.6-1.1c1.4-1.5 1.4-3.8 0-5.3l-11.8-11.8zM486 172.7c-0.7-0.7-1.6-1.1-2.6-1.1s-1.9 0.4-2.6 1.1c-1.4 1.5-1.4 3.8 0 5.3l11.9 11.9c0.7 0.7 1.6 1.1 2.6 1.1s1.9-0.4 2.6-1.1c0.7-0.7 1.1-1.6 1.1-2.6s-0.4-1.9-1.1-2.6l-11.9-12zM483.4 159.5c1 0 1.9-0.4 2.6-1.1l11.9-11.9c0.7-0.7 1.1-1.6 1.1-2.6s-0.4-1.9-1.1-2.6c-1.5-1.5-3.8-1.5-5.3 0l-11.9 11.9c-1.4 1.5-1.4 3.8 0 5.3 0.8 0.6 1.7 1 2.7 1zM461.2 172.7l-11.9 11.9c-0.7 0.7-1.1 1.6-1.1 2.6s0.4 1.9 1.1 2.6c0.7 0.7 1.6 1.1 2.6 1.1s1.9-0.4 2.6-1.1l11.9-11.9c1.4-1.5 1.4-3.8 0-5.3-1.3-1.3-3.8-1.3-5.2 0.1zM463.5 165.6c0-2.1-1.7-3.7-3.7-3.7h-16.9c-2.1 0-3.7 1.7-3.7 3.7s1.7 3.7 3.7 3.7h16.9c2 0 3.7-1.7 3.7-3.7zM504.4 161.8h-16.9c-2.1 0-3.7 1.7-3.7 3.7s1.7 3.7 3.7 3.7h16.9c2.1 0 3.7-1.7 3.7-3.7s-1.7-3.7-3.7-3.7zM473.6 131.1c-2.1 0-3.7 1.7-3.7 3.7v16.9c0 2.1 1.7 3.7 3.7 3.7s3.7-1.7 3.7-3.7v-16.9c0-2-1.6-3.7-3.7-3.7zM473.6 175.7c-2.1 0-3.7 1.7-3.7 3.7v16.9c0 2.1 1.7 3.7 3.7 3.7s3.7-1.7 3.7-3.7v-16.9c0-2.1-1.6-3.7-3.7-3.7z"
                fill="#FAEE00" p-id="11493"></path>
            <path
                d="M905.9 559.8c-1.5-1.4-3.8-1.4-5.3 0-0.7 0.7-1.1 1.6-1.1 2.6s0.4 1.9 1.1 2.6l11.9 11.9c0.7 0.7 1.6 1.1 2.6 1.1s1.9-0.4 2.6-1.1c1.4-1.5 1.4-3.8 0-5.3l-11.8-11.8zM937.5 591.3c-0.7-0.7-1.6-1.1-2.6-1.1s-1.9 0.4-2.6 1.1c-1.4 1.5-1.4 3.8 0 5.3l11.9 11.9c0.7 0.7 1.6 1.1 2.6 1.1s1.9-0.4 2.6-1.1c0.7-0.7 1.1-1.6 1.1-2.6s-0.4-1.9-1.1-2.6l-11.9-12zM934.8 578.1c1 0 1.9-0.4 2.6-1.1l11.9-11.9c0.7-0.7 1.1-1.6 1.1-2.6s-0.4-1.9-1.1-2.6c-1.5-1.5-3.8-1.5-5.3 0l-11.9 11.9c-1.4 1.5-1.4 3.8 0 5.3 0.8 0.6 1.7 1 2.7 1zM912.6 591.3l-11.9 11.9c-0.7 0.7-1.1 1.6-1.1 2.6s0.4 1.9 1.1 2.6c0.7 0.7 1.6 1.1 2.6 1.1s1.9-0.4 2.6-1.1l11.9-11.9c1.4-1.5 1.4-3.8 0-5.3-1.3-1.3-3.8-1.3-5.2 0.1zM914.9 584.2c0-2.1-1.7-3.7-3.7-3.7h-16.9c-2.1 0-3.7 1.7-3.7 3.7s1.7 3.7 3.7 3.7h16.9c2 0 3.7-1.7 3.7-3.7zM955.8 580.4h-16.9c-2.1 0-3.7 1.7-3.7 3.7s1.7 3.7 3.7 3.7h16.9c2.1 0 3.7-1.7 3.7-3.7s-1.7-3.7-3.7-3.7zM925 549.7c-2.1 0-3.7 1.7-3.7 3.7v16.9c0 2.1 1.7 3.7 3.7 3.7s3.7-1.7 3.7-3.7v-16.9c0.1-2-1.6-3.7-3.7-3.7zM925 594.3c-2.1 0-3.7 1.7-3.7 3.7v16.9c0 2.1 1.7 3.7 3.7 3.7s3.7-1.7 3.7-3.7V598c0.1-2-1.6-3.7-3.7-3.7z"
                fill="#F8B62D" p-id="11494"></path>
            <path
                d="M834 892.9h-24c-5.6 0-10.1-4.5-10.1-10.1s4.5-10.1 10.1-10.1h24c5.6 0 10.1 4.5 10.1 10.1s-4.5 10.1-10.1 10.1zM192.2 892.9h-30.7c-5.6 0-10.1-4.5-10.1-10.1s4.5-10.1 10.1-10.1h30.7c5.6 0 10.1 4.5 10.1 10.1s-4.5 10.1-10.1 10.1zM780.3 892.9H226.1c-5.6 0-10.1-4.5-10.1-10.1s4.5-10.1 10.1-10.1h554.1c5.6 0 10.1 4.5 10.1 10.1s-4.5 10.1-10 10.1z"
                fill="#3E3A39" p-id="11495"></path>
            <path
                d="M743 416.7c14.7 36.6 22.9 76.5 22.9 118.3 0 175.5-142.3 317.9-317.9 317.9-28.3 0-55.7-3.7-81.9-10.7 42.9 25.1 92.7 39.5 146 39.5 160.1 0 289.8-129.8 289.8-289.8C802 526 780 465.3 743 416.7z"
                fill="#F8B62D" p-id="11496"></path>
            <path
                d="M765.9 535c0-41.8-8.2-81.8-22.9-118.3C690.1 347 606.4 302 512.1 302 352 302 222.3 431.8 222.3 591.8c0 106.8 57.8 200.1 143.8 250.3 26.1 6.9 53.5 10.7 81.9 10.7 175.6 0.1 317.9-142.2 317.9-317.8z"
                fill="#FCEE21" p-id="11497"></path>
            <path
                d="M498.1 891.7c-173.1 0-313.9-140.8-313.9-313.9 0-47.8 10.5-93.7 31.1-136.5 2.4-5 8.5-7.1 13.5-4.7 5 2.4 7.1 8.5 4.7 13.5-19.3 40-29.1 82.9-29.1 127.7 0 162 131.8 293.8 293.8 293.8S792 739.8 792 577.8 660.1 284.1 498.1 284.1c-70.5 0-138.7 25.4-192 71.5-4.2 3.6-10.6 3.2-14.2-1-3.6-4.2-3.2-10.6 1-14.2 57-49.2 129.8-76.4 205.2-76.4C671.2 264 812 404.8 812 577.9S671.2 891.7 498.1 891.7z"
                fill="#3E3A39" p-id="11498"></path>
            <path
                d="M503.2 674.3l-56.8 30.5c-9.6 5.1-20.7-3.2-18.9-14l10.9-64.6c0.7-4.3-0.7-8.7-3.7-11.8l-46-45.7c-7.7-7.7-3.5-21.1 7.2-22.7l63.5-9.4c4.2-0.6 7.9-3.3 9.8-7.3l28.4-58.8c4.8-9.9 18.6-9.9 23.4 0l28.4 58.8c1.9 3.9 5.6 6.6 9.8 7.3l63.5 9.4c10.7 1.6 15 15 7.2 22.7l-46 45.7c-3.1 3.1-4.5 7.5-3.7 11.8l10.9 64.6c1.8 10.9-9.3 19.1-18.9 14l-56.8-30.5c-3.8-2-8.4-2-12.2 0z"
                fill="#FFFFFF" p-id="11499"></path>
            <path
                d="M577 716.4c-4 0-8-1-11.6-2.9l-65-34.2c-1.4-0.7-3.1-0.7-4.5 0l-65 34.2c-8.5 4.5-18.6 3.7-26.3-1.9-7.8-5.6-11.6-15-9.9-24.4l12.4-72.4c0.3-1.6-0.2-3.2-1.4-4.3l-52.6-51.2c-6.9-6.7-9.3-16.5-6.3-25.6 3-9.1 10.7-15.6 20.2-17l72.6-10.6c1.6-0.2 2.9-1.2 3.6-2.6l32.5-65.8c4.2-8.6 12.8-13.9 22.4-13.9s18.2 5.3 22.4 13.9l32.5 65.8c0.7 1.4 2.1 2.4 3.6 2.6l72.6 10.6c9.5 1.4 17.2 7.9 20.2 17s0.5 18.9-6.3 25.6l-52.6 51.2c-1.1 1.1-1.7 2.7-1.4 4.3l12.4 72.3c1.6 9.4-2.2 18.8-9.9 24.4-4.3 3.3-9.4 4.9-14.6 4.9z m-78.9-57.7c4 0 8 1 11.6 2.9l65 34.2c2.4 1.3 4.3 0.2 5.1-0.4 0.7-0.5 2.4-2 1.9-4.7l-12.4-72.3c-1.4-8.1 1.3-16.4 7.2-22.1l52.6-51.2c1.9-1.9 1.5-4.1 1.2-4.9-0.3-0.9-1.2-2.9-3.9-3.3l-72.6-10.6c-8.1-1.2-15.2-6.3-18.8-13.7l-32.5-65.8c-1.2-2.4-3.4-2.7-4.3-2.7s-3.1 0.3-4.3 2.7l-32.5 65.8c-3.6 7.4-10.7 12.5-18.8 13.7L370 536.9c-2.7 0.4-3.6 2.4-3.9 3.3-0.3 0.9-0.7 3 1.2 4.9l52.6 51.2c5.9 5.7 8.6 14 7.2 22.1l-12.4 72.4c-0.5 2.7 1.2 4.2 1.9 4.7s2.7 1.6 5.1 0.4l65-34.2c3.4-2.1 7.4-3 11.4-3z"
                fill="#3E3A39" p-id="11500"></path>
            <path
                d="M365.7 370.2c-7.8 3.8-15 9.1-21 15.4-4.2 4.5-4.8 12.3 0 16.6 4.6 4.2 12.1 4.8 16.6 0 1.3-1.3 2.5-2.6 3.9-3.8 0.6-0.5 1.2-1.1 1.8-1.6 1.7-1.4-2.1 1.4 1-0.8 3-2.1 6.1-3.9 9.5-5.5 5.6-2.7 7.5-11.1 4.2-16.1-3.5-5.7-10-7-16-4.2z"
                fill="#FFFFFF" p-id="11501"></path>
            <path
                d="M320.5 412.1c-17.4 15.9-30.1 35.4-38.1 57.5-5.2 14.3 17.6 20.4 22.7 6.3 6.6-18.3 17.6-34.1 32-47.1 11.3-10.3-5.4-26.9-16.6-16.7z"
                fill="#FFFFFF" p-id="11502"></path>
            <path
                d="M244.3 414.6c-2.2 0-4.4-0.7-6.2-2.2-4.4-3.5-5.1-9.8-1.7-14.2l24.6-31.1c3.5-4.4 9.8-5.1 14.2-1.7 4.4 3.5 5.1 9.8 1.7 14.2l-24.6 31.1c-2.1 2.6-5 3.9-8 3.9z"
                fill="#3E3A39" p-id="11503"></path>
          </svg>
        </t-button>
        <t-button v-if="collected" class="star-icon" theme="primary" @click="UseColletion()">
          <svg class="icon" height="32" p-id="12693" style="margin-top: 10px" t="1713617722938"
               version="1.1" viewBox="0 0 1024 1024" width="32" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M923.136 427.52l-223.232-55.808c-4.096-1.024-7.68-3.584-9.728-7.168l-121.856-194.56c-5.12-8.192-12.288-15.36-20.992-20.48-30.72-19.456-71.168-9.728-90.624 20.48l-122.368 194.56c-2.048 3.584-5.632 6.144-9.728 7.168L100.864 427.52c-9.728 2.56-18.432 7.168-26.112 13.312-27.648 23.04-31.744 64.512-8.192 92.16l38.4 46.08 48.64 4.096c230.912 20.48 435.2 164.352 531.968 374.784l21.504 47.104 24.064 9.728c9.216 3.584 18.944 5.12 29.184 4.608 36.352-2.56 63.488-33.792 60.928-69.632l-15.872-228.864c-0.512-4.096 1.024-8.192 3.584-11.776l147.456-176.128c6.656-7.68 10.752-16.384 13.312-26.112 9.728-34.816-11.264-70.656-46.592-79.36z"
                fill="#FFFD10" p-id="12694"></path>
            <path
                d="M149.504 632.32l64.512 77.312c2.56 3.072 4.096 7.68 3.584 11.776l-15.872 228.864c-0.512 9.728 1.024 19.968 4.608 29.184 10.24 25.6 34.816 40.96 60.928 40.96 8.192 0 16.384-1.536 24.576-4.608l213.504-86.016c2.048-1.024 4.096-1.024 6.144-1.024 2.048 0 4.096 0.512 6.144 1.024l123.392 49.664c-87.04-190.976-272.384-327.68-491.52-347.136z"
                fill="#FFA24B" p-id="12695"></path>
            <path
                d="M651.776 66.56c-16.896 0-31.232 13.824-31.232 30.72s13.824 30.72 31.232 30.72c17.408 0 31.232-13.824 31.232-30.72-0.512-16.896-14.336-30.72-31.232-30.72z m0 46.08c-8.704 0-15.872-7.168-15.872-15.36s7.168-15.36 15.872-15.36 15.872 7.168 15.872 15.36c-0.512 8.192-7.68 15.36-15.872 15.36z"
                fill="#46C5FF" p-id="12696"></path>
            <path
                d="M302.08 257.536h-13.824v-13.312c0-3.584-3.072-6.656-6.656-6.656s-6.656 3.072-6.656 6.656v13.312H261.12c-3.584 0-6.656 3.072-6.656 6.656 0 3.584 3.072 6.656 6.656 6.656h13.824v13.312c0 3.584 3.072 6.656 6.656 6.656s6.656-3.072 6.656-6.656v-13.312H302.08c3.584 0 6.656-3.072 6.656-6.656s-2.56-6.656-6.656-6.656zM948.736 227.328h-13.824v-13.312c0-3.584-3.072-6.656-6.656-6.656s-6.656 3.072-6.656 6.656v13.312h-13.824c-3.584 0-6.656 3.072-6.656 6.656s3.072 6.656 6.656 6.656h13.824v13.312c0 3.584 3.072 6.656 6.656 6.656s6.656-3.072 6.656-6.656V240.64h13.824c3.584 0 6.656-3.072 6.656-6.656s-3.072-6.656-6.656-6.656z"
                fill="#F7E42F" p-id="12697"></path>
            <path
                d="M54.784 372.736H38.912v-15.36c0-4.096-3.584-7.68-7.68-7.68s-7.68 3.584-7.68 7.68v15.36H7.68c-4.096 0-7.68 3.584-7.68 7.68s3.584 7.68 7.68 7.68h15.872v15.36c0 4.096 3.584 7.68 7.68 7.68s7.68-3.584 7.68-7.68v-15.36h15.872c4.096 0 7.68-3.584 7.68-7.68s-3.584-7.68-7.68-7.68z"
                fill="#F8B62D" p-id="12698"></path>
            <path d="M346.624 128a11.776 11.264 0 1 0 23.552 0 11.776 11.264 0 1 0-23.552 0Z" fill="#F8B62D"
                  p-id="12699"></path>
            <path
                d="M807.424 173.568c-8.704 0-15.36 6.656-15.36 14.848 0 8.192 6.656 14.848 15.36 14.848s15.36-6.656 15.36-14.848c0-8.192-6.656-14.848-15.36-14.848z"
                fill="#F8B62D" p-id="12700"></path>
            <path
                d="M667.136 207.872c-8.704 0-15.36 6.656-15.36 14.848 0 8.192 6.656 14.848 15.36 14.848s15.36-6.656 15.36-14.848c-1.024-8.192-7.168-14.848-15.36-14.848z"
                fill="#F7E42F" p-id="12701"></path>
            <path
                d="M180.736 161.792c-16.896 0-31.232 13.824-31.232 30.72s13.824 30.72 31.232 30.72c17.408 0 31.232-13.824 31.232-30.72s-14.336-30.72-31.232-30.72z m0 46.08c-8.704 0-15.872-7.168-15.872-15.36 0-8.704 7.168-15.36 15.872-15.36 8.704 0 15.872 7.168 15.872 15.36s-7.168 15.36-15.872 15.36z"
                fill="#F8B62D" p-id="12702"></path>
            <path
                d="M487.936 46.592l-13.824 13.312c-1.024 0.512-1.536 1.536-1.536 2.56s0.512 2.048 1.024 3.072c1.024 1.024 2.048 1.024 3.072 1.024s2.048-0.512 3.072-1.024l13.824-13.312c1.536-1.536 1.536-4.096 0-6.144-1.536-1.024-4.096-1.024-5.632 0.512zM480.256 11.264c-1.536-1.536-4.096-1.536-6.144 0-1.024 1.024-1.536 2.048-1.536 3.072s0.512 2.048 1.024 3.072L487.424 30.72c1.024 1.024 2.048 1.024 3.072 1.024s2.048-0.512 3.072-1.024c1.536-1.536 1.536-4.096 0-6.144l-13.312-13.312zM501.76 49.664c-2.56 0-4.096 2.048-4.096 4.096v18.944c0 2.56 2.048 4.096 4.096 4.096s4.096-2.048 4.096-4.096v-18.944c0.512-2.048-1.536-4.096-4.096-4.096zM490.496 38.4c0-2.56-2.048-4.096-4.096-4.096h-19.456c-2.56 0-4.096 2.048-4.096 4.096 0 2.56 2.048 4.096 4.096 4.096H486.4c2.048 0 4.096-1.536 4.096-4.096zM501.76 0c-2.56 0-4.096 2.048-4.096 4.096v18.944c0 2.56 2.048 4.096 4.096 4.096s4.096-2.048 4.096-4.096V4.096c0.512-2.56-1.536-4.096-4.096-4.096zM537.088 34.304h-19.456c-2.56 0-4.096 2.048-4.096 4.096 0 2.56 2.048 4.096 4.096 4.096h19.456c2.56 0 4.096-2.048 4.096-4.096s-1.536-4.096-4.096-4.096zM516.096 46.592c-1.024-1.024-2.048-1.024-3.072-1.024-1.024 0-2.048 0.512-3.072 1.024-1.536 1.536-1.536 4.096 0 6.144l13.824 13.312c1.024 1.024 2.048 1.024 3.072 1.024 1.024 0 2.048-0.512 3.072-1.024 1.024-1.024 1.024-1.536 1.024-3.072 0-1.024-0.512-2.048-1.024-3.072l-13.824-13.312zM513.024 31.744c1.024 0 2.048-0.512 3.072-1.024l13.824-13.312c1.024-1.024 1.024-1.536 1.024-3.072 0-1.024-0.512-2.048-1.024-3.072-1.536-1.536-4.096-1.536-6.144 0l-13.824 13.312c-1.536 2.048-1.536 4.608 0 6.144 1.024 0.512 2.048 1.024 3.072 1.024z"
                fill="#FAEE00" p-id="12703"></path>
            <path
                d="M998.912 404.48c-1.024-1.024-2.048-1.024-3.072-1.024s-2.048 0.512-3.072 1.024c-1.536 1.536-1.536 4.096 0 6.144l13.824 13.312c1.024 1.024 2.048 1.024 3.072 1.024s2.048-0.512 3.072-1.024c1.024-1.024 1.024-1.536 1.024-3.072 0-1.024-0.512-2.048-1.024-3.072l-13.824-13.312zM970.24 404.48l-13.824 13.312c-1.024 1.024-1.024 1.536-1.024 3.072 0 1.024 0.512 2.048 1.024 3.072 1.024 1.024 2.048 1.024 3.072 1.024s2.048-0.512 3.072-1.024l13.824-13.312c1.536-1.536 1.536-4.096 0-6.144-1.536-1.536-4.608-1.536-6.144 0zM1019.904 392.704h-19.456c-2.56 0-4.096 2.048-4.096 4.096s2.048 4.096 4.096 4.096h19.456c2.56 0 4.096-2.048 4.096-4.096 0-2.56-2.048-4.096-4.096-4.096zM963.072 369.152c-1.536-1.536-4.096-1.536-6.144 0-1.024 1.024-1.024 1.536-1.024 3.072 0 1.024 0.512 2.048 1.024 3.072l13.312 13.312c1.024 1.024 2.048 1.024 3.072 1.024 1.024 0 2.048-0.512 3.072-1.024 1.536-1.536 1.536-4.096 0-6.144l-13.312-13.312zM995.84 389.632c1.024 0 2.048-0.512 3.072-1.024l13.824-13.312c1.024-1.024 1.024-1.536 1.024-3.072s-0.512-2.048-1.024-3.072c-1.536-1.536-4.096-1.536-6.144 0l-13.824 13.312c-1.536 1.536-1.536 4.096 0 6.144 1.024 1.024 2.048 1.024 3.072 1.024zM984.576 408.064c-2.56 0-4.096 2.048-4.096 4.096v18.944c0 2.56 2.048 4.096 4.096 4.096 2.56 0 4.096-2.048 4.096-4.096v-18.944c0-2.56-1.536-4.096-4.096-4.096zM972.8 396.8c0-2.56-2.048-4.096-4.096-4.096h-19.456c-2.56 0-4.096 2.048-4.096 4.096s2.048 4.096 4.096 4.096h19.456c2.56 0 4.096-2.048 4.096-4.096zM984.576 358.4c-2.56 0-4.096 2.048-4.096 4.096v18.944c0 2.56 2.048 4.096 4.096 4.096 2.56 0 4.096-2.048 4.096-4.096v-18.944c0-2.56-1.536-4.096-4.096-4.096z"
                fill="#F8B62D" p-id="12704"></path>
          </svg>
        </t-button>
        <t-button class="beer-icon" style="height: 50px" theme="primary" @click="buy">
          <svg class="icon" height="48" p-id="14104" style="margin-top: 17px" t="1713617872007"
               version="1.1" viewBox="0 0 1024 1024" width="48" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M891.863125 0H49.559696C22.243023 0 0.01057 22.228929 0.01057 49.549126v495.473642c0 27.316673 22.228929 49.549126 49.545603 49.549126h627.599946v-173.416656c0-22.806762 18.480066-41.290351 41.290351-41.290351 22.806762 0 41.290351 18.480066 41.290351 41.290351v170.129353l1.867385-0.081037c5.05251-17.109476 20.678647-29.663236 39.422966-29.663237 17.588654 0 32.520688 11.049282 38.46461 26.559149l5.73252-0.232542c5.996773-15.375978 20.875956-26.326607 38.383572-26.326607 16.334335 0 30.322106 9.562421 37.012982 23.321174l0.761048-0.03171a49.813378 49.813378 0 0 0 20.033871-39.80349V49.549126C941.408728 22.228929 919.179798 0 891.863125 0z"
                fill="#F9BA48" p-id="14105"></path>
            <path
                d="M313.812305 189.930682c0-68.307538-55.559992-123.86753-123.86753-123.86753H66.073722V528.505218h123.86753c68.307538 0 123.86753-55.559992 123.86753-123.86753 0-45.831973-25.02296-85.931425-62.131074-107.353503 37.111636-21.422078 62.134597-61.521531 62.134597-107.353503z m-33.031576 214.707006c0 50.091725-40.761846 90.835953-90.835954 90.835954H99.105298V313.801735h90.835954c50.077631 0 90.839477 40.744229 90.839477 90.835953zM189.941252 280.770159H99.105298V99.094728h90.835954c50.074108 0 90.835953 40.744229 90.835953 90.835954S240.018883 280.770159 189.941252 280.770159zM594.57894 404.637688V66.063152h-33.031576v338.574536c0 50.091725-40.761846 90.835953-90.835953 90.835954s-90.835953-40.744229-90.835954-90.835954V66.063152h-33.031576v338.574536c0 68.307538 55.559992 123.86753 123.86753 123.86753s123.86753-55.559992 123.867529-123.86753z"
                fill="#333333" p-id="14106"></path>
            <path
                d="M1004.963242 593.000471c-12.056966-10.933011-28.225702-16.267391-44.676308-14.650164-7.860634 0.792758-15.192763 3.385957-21.799078 7.215858-7.399073-23.419828-29.067787-40.54692-54.883505-40.546921-16.186353 0-30.783667 6.722586-41.290351 17.472383-10.50316-10.75332-25.103998-17.472383-41.290351-17.472383-8.903551 0-17.243364 2.195058-24.772802 5.795941V328.994498c55.922899-8.061466 99.094728-56.169535 99.094729-114.291015V66.063152h-33.031576v148.643854c0 45.532486-37.044692 82.580702-82.577179 82.580702s-82.577179-37.044692-82.577179-82.580702V66.063152h-33.031576v148.643854c0 58.117957 43.17183 106.229549 99.094729 114.291016v40.282667c-5.845268-2.924396-12.15562-4.953856-18.878207-5.630342a57.71277 57.71277 0 0 0-44.676308 14.650165 57.895985 57.895985 0 0 0-19.026187 42.858249v311.208536l-62.923832-62.909737c-25.946083-25.977793-66.757256-27.912122-92.833703-4.411257-13.642481 12.289508-21.404461 29.117114-21.883639 47.417488-0.461561 18.036121 10.337562 35.691719 23.088631 48.439265l171.070092 167.289518v95.793333h33.031576v-109.467525l-180.731167-176.96821c-6.472427-6.472427-11.792713-15.080016-11.546078-24.230203s3.202742-17.57456 10.023983-23.733407c12.832107-11.560171 33.627025-10.073309 46.920693 3.220358l118.81502 119.294198V421.151715c0-7.085493 2.906779-13.607248 8.16012-18.381412a24.779848 24.779848 0 0 1 19.223497-6.261025c12.419873 1.240226 22.165509 13.096359 22.165509 27.003093v253.633178h33.031576v-74.321927c0-13.660098 11.116226-24.772801 24.772801-24.772802s24.772801 11.116226 24.772801 24.772802v74.321927h33.031576v-74.321927c0-13.660098 11.116226-24.772801 24.772802-24.772802s24.772801 11.116226 24.772801 24.772802v90.835953h33.031576v-55.443721c0-13.889117 9.745636-25.766391 22.165509-27.003093a24.522642 24.522642 0 0 1 19.223496 6.261025 24.568446 24.568446 0 0 1 8.160121 18.381412v305.54296c0 9.10086-7.399073 16.51755-16.514027 16.51755h-16.517549v66.063152h33.031576v-35.857318c19.223496-6.821241 33.031576-25.185035 33.031576-46.723384v-305.54296a57.888938 57.888938 0 0 0-19.026188-42.854727z"
                fill="#333333" p-id="14107"></path>
          </svg>
        </t-button>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import {h, onMounted, ref} from 'vue';
import router from '../router';
import User from '../model/user';
import {ChatIcon} from 'tdesign-icons-vue-next';
import {addCollection, deleteCollection, getItemByItemIdApi, isCollected} from '../apis/ItemApi';
import {getUserInfoByUidApi} from '../apis/UserApi';
import Item from '../model/item.ts';
import {CreatePurchase} from "../apis/PurchaseApi.ts";
import {LocalStorage} from "../storage/LocalStorage.ts";

const chatIcon = () => h(ChatIcon, {size: '24px'})
// const starIcon = () => h(StarIcon, { size: '24px' })
// const beerIcon = () => h(BeerIcon, { size: '24px' })

onMounted(async () => {
  const tid = router.currentRoute.value.query.tid?.toString() ?? ' ';
  const uid = router.currentRoute.value.query.uid?.toString() ?? ' ';


  await getItemByItemIdApi({id: tid}).then(
      res => item.value = res.data
  )
  await getUserInfoByUidApi({id: uid}).then(
      res => user.value = res.data
  )
  await CheckCollected()
})

// let user: User;
// let item: BaseItem;
// let images: Array<string>;

// const imageCdn = 'https://tdesign.gtimg.com/mobile/demos';
// const swiperList = [
//     `${imageCdn}/swiper1.png`,
//     `${imageCdn}/swiper2.png`,
//     `${imageCdn}/swiper1.png`,
//     `${imageCdn}/swiper2.png`,
//     `${imageCdn}/swiper1.png`,
// ];

const item = ref<Item>(new Item());
const user = ref<User>(new User());
const goBack = () => {
  router.back();
}
const gochat = () => {
  router.push({name: "chat", query: {tousername: user.value.name.toString(), touserid: user.value.id.toString()}});
}
const buy = async () => {
  const res = await CreatePurchase({
    item_id: item.value.item.id.toString(),
    pirce: item.value.item.prices,
    id: LocalStorage().getUserId()
  })
  await router.push({
    name: "PurchaseDetail",
    query: {purchaseid: res.data.toString(), itemid: item.value.item.id.toString()}
  })
}

const collected = ref(false)
const CheckCollected = async () => {
  const res = await isCollected({item_id: item.value.item.id.toString(), uid: user.value.id.toString()})
  collected.value = res.data
}
const UseColletion = async () => {
  if (collected.value) {
    await deleteCollection({item_id: item.value.item.id.toString(), uid: user.value.id.toString()})
    collected.value = false
  } else {
    await addCollection({item_id: item.value.item.id.toString(), uid: user.value.id.toString()})
    collected.value = true
  }
}
</script>

<style lang="less" scoped>
.item-detail-container {
  display: flex;
  flex-direction: column;

}

.user-info {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-left: 16px;
  margin-top: 10px;

  .avatar-container {
    margin-right: 16px;
  }

  .info-container {
    display: flex;
    flex-direction: column;
  }

  .username {
    font-size: 16px;
    font-weight: bold;
  }
}

.item-images {
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  margin-left: 10px;
  margin-right: 10px;

  img {
    border-radius: 10px;
    width: 100%;
    height: 100%;
  }
}

.item-title {
  margin-top: 10px;
  margin-left: 10px;
  font-size: 30px;

}

.price {
  margin-top: 12px;
  margin-left: 8px;

  .symbol {
    font-size: 18px;
    font-weight: bold;
    color: #F00;
  }

  .data {
    font-size: 28px;
    font-weight: bold;
    color: #F00;
  }
}

.desc {
  margin-top: 5px;
  margin-left: 10px;
  margin-right: 10px;
  color: rgb(41, 41, 41);

  p {
    font-size: 20px;
  }

}

.botbar {
  position: fixed;
  bottom: 5px;
  display: flex;
  width: 100%;
  justify-content: space-around;


  .chat-icon {
    background-color: #70a1d7;
    --td-button-primary-border-color: #70a1d7;
    width: 20%;
  }

  .star-icon {
    background-color: #a1de93;
    --td-button-primary-border-color: #a1de93;
    width: 20%;
  }

  .beer-icon {
    background-color: #f47c7c;
    --td-button-primary-border-color: #f47c7c;
    width: 50%;
    margin-right: 20px;
  }

}

.item-info {
  margin-top: 5px;
  margin-left: 10px;
  margin-right: 10px;
  border-radius: 10px;
}
</style>